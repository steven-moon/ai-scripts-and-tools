# Agent-Driven Development Workflow

> **Purpose**: Optimize Cursor for agent-driven development with automatic TypeScript project management  
> **Status**: âœ… **IMPLEMENTED**  
> **Priority**: ğŸ”´ **CRITICAL - CORE WORKFLOW**

---

## Logging Rule (2024-06-27)

**All logs generated by scripts or automation must be written to `/tmp` or a dedicated `logs/` directory, never to the project root.** This prevents clutter and accidental log commits.

---

## Executive Summary

This document describes the **agent-driven development workflow** that transforms Cursor into an autonomous development assistant for TypeScript-based AI scripts and tools. The system automatically builds, tests, and validates your TypeScript code after every change, ensuring code quality and functionality.

### **Key Benefits:**
- âœ… **Zero Manual Commands**: Agent automatically runs build/test/lint cycle
- âœ… **Instant Feedback**: Immediate validation of TypeScript code changes
- âœ… **Error Auto-Fix**: Agent attempts to fix build/test failures automatically
- âœ… **LLM Integration**: Automatic testing of LLM provider integrations
- âœ… **Comprehensive Logging**: Detailed logs for debugging and optimization

---

## How It Works

### **Automatic Workflow Trigger**

The agent automatically triggers the development cycle when:

1. **TypeScript files are saved** (`Ctrl+S` or auto-save)
2. **Project files change** (package.json, tsconfig.json, .env)
3. **Terminal commands are executed** (build, test, lint)
4. **Manual agent commands** are issued

### **Development Cycle**

```
Code Change â†’ Lint â†’ Build â†’ Test â†’ Validate â†’ Report
```

1. **Code Change**: Edit TypeScript files or project configuration
2. **Lint**: Check TypeScript code quality and type safety
3. **Build**: Compile TypeScript to JavaScript
4. **Test**: Run unit tests and LLM provider tests
5. **Validate**: Test script functionality and LLM integrations
6. **Report**: Provide status and next steps

---

## Agent Commands

### **Core Commands**

| Command | Description | Auto-Triggered |
|---------|-------------|----------------|
| `build` | Build TypeScript project | âœ… On TypeScript file save |
| `dev` | Run development server | ğŸ”§ Manual only |
| `test` | Run all tests | âœ… After build |
| `lint` | Check TypeScript code | âœ… On file save |
| `clean` | Clean build artifacts | âœ… On package file change |
| `install` | Install dependencies | âœ… On package file change |
| `commit` | Generate git commit message | ğŸ”§ Manual only |
| `summary` | Generate code summary | ğŸ”§ Manual only |
| `test-llm` | Test LLM providers | ğŸ”§ Manual only |

### **Usage Examples**

```bash
# Manual commands (if needed)
npm run build
npm run lint
npm test
ts-node src/scripts/generate-git-commit.ts
ts-node src/scripts/generate-code-summary.ts
ts-node tests/scripts/test-llm-providers.ts
```

---

## Agent Behavior Rules

### **MANDATORY Actions**

The agent **ALWAYS** performs these actions after code changes:

1. **Lint Validation**: Check TypeScript code quality and type safety
2. **Build Compilation**: Compile TypeScript to JavaScript
3. **Test Execution**: Run test suite and LLM provider tests
4. **Dependency Management**: Install/update npm dependencies
5. **Status Reporting**: Provide clear status and next steps

### **Error Handling**

The agent **automatically** handles errors:

- **Build Failures**: Analyze TypeScript errors and suggest fixes
- **Test Failures**: Identify failing tests and propose solutions
- **Lint Issues**: Fix code formatting and type issues
- **Dependency Issues**: Update packages and regenerate lock files

### **Communication Pattern**

The agent follows this communication pattern:

```
âœ… Code changes made
ğŸ” Linting TypeScript...
âœ… Lint passed
ğŸ”¨ Building project...
âœ… Build successful (1.2s)
ğŸ§ª Running tests...
âœ… Tests passed (3/3)
ğŸ”— Testing LLM providers...
âœ… All providers working
ğŸ¯ Ready for user testing
```

---

## Configuration

### **Cursor Settings**

The agent uses these Cursor settings (`.cursor/settings.json`):

```json
{
  "cursor.agent.enabled": true,
  "cursor.agent.autoRun": true,
  "cursor.agent.autoRunOnSave": true,
  "cursor.agent.autoRunOnFileChange": true,
  "cursor.agent.autoRunOnTerminalCommand": true,
  "cursor.agent.autoRunOnBuild": true,
  "cursor.agent.autoRunOnTest": true
}
```

### **Environment Variables**

Set these environment variables for optimal performance:

```bash
export NODE_ENV=development
export TS_NODE_PROJECT=./tsconfig.json
export AI_SCRIPTS_PATH="/Users/stevenmoon/GitRepo/ai-scripts-and-tools"
```

### **Project Configuration**

The agent uses these project-specific settings:

- **Node Version**: 18+
- **TypeScript Version**: 5.x
- **Package Manager**: npm
- **Build Output**: ./dist
- **Log File**: /tmp/ai-scripts-build.log

---

## Monitoring & Logging

### **Build Logs**

Build logs are captured in `/tmp/ai-scripts-build.log`:

```bash
# View recent build logs
tail -f /tmp/ai-scripts-build.log

# View build errors only
grep -i "error\|failed" /tmp/ai-scripts-build.log
```

### **TypeScript Compilation**

The agent monitors TypeScript compilation:

```bash
# Check TypeScript compilation
npx tsc --noEmit

# Run with verbose output
npx tsc --noEmit --listFiles
```

### **LLM Provider Testing**

The agent tests LLM provider integrations:

```bash
# Test all LLM providers
ts-node tests/scripts/test-llm-providers.ts

# Test specific provider
ts-node tests/scripts/test-provider.ts openai
```

### **Performance Metrics**

The agent tracks performance metrics:

- **Build Time**: Target <5 seconds
- **Test Execution**: Target <10 seconds
- **Lint Time**: Target <2 seconds
- **LLM Test Time**: Target <30 seconds

---

## Troubleshooting

### **Common Issues**

#### **Build Failures**

```bash
# Clean build artifacts
npm run clean

# Reinstall dependencies
npm install

# Check TypeScript version
npx tsc --version
```

#### **Test Failures**

```bash
# Run tests with verbose output
npm test -- --verbose

# Run specific test file
npx jest tests/scripts/test-llm-providers.ts

# Check test environment
node --version
npm --version
```

#### **LLM Provider Issues**

```bash
# Test environment variables
node -e "console.log(process.env.OPENAI_API_KEY ? 'OpenAI configured' : 'OpenAI missing')"

# Test specific provider
ts-node tests/scripts/test-provider.ts local

# Check API endpoints
curl -X GET http://localhost:1234/v1/models
```

### **Agent Debugging**

#### **Enable Debug Logging**

```json
{
  "cursor.agent.logging": {
    "enabled": true,
    "level": "debug",
    "file": "/tmp/cursor-agent-debug.log"
  }
}
```

#### **Check Agent Status**

```bash
# View agent logs
tail -f /tmp/cursor-agent.log

# Check agent configuration
cat .cursor/settings.json
```

---

## Best Practices

### **For Optimal Performance**

1. **Keep Dependencies Updated**: Regularly run `npm update`
2. **Use Incremental Builds**: Avoid full clean builds unless necessary
3. **Monitor Resource Usage**: Close other apps during intensive builds
4. **Regular Cleanup**: Run `npm run clean` weekly

### **For Better Error Handling**

1. **Check Logs First**: Always review build/test logs before asking for help
2. **Use TypeScript Strict Mode**: Enable strict TypeScript checking
3. **Test LLM Providers**: Regularly test all LLM provider integrations
4. **Monitor Dependencies**: Keep track of package vulnerabilities

### **For Development Efficiency**

1. **Trust the Agent**: Let the agent handle routine tasks automatically
2. **Focus on Code**: Concentrate on writing TypeScript, not running commands
3. **Use Development Mode**: Run `npm run dev` for rapid iteration
4. **Monitor Logs**: Keep log monitoring active during development

---

## Integration with Existing Workflow

### **Cursor Rules Integration**

The agent workflow integrates with existing Cursor rules:

- **@agent-workflow.mdc**: Core workflow automation
- **@typescript-style.mdc**: TypeScript coding style enforcement
- **@llm-architecture.mdc**: LLM provider architecture
- **@node-cursor-tips.mdc**: Node.js productivity tips

### **Script Integration**

The agent uses these existing scripts:

- **generate-git-commit.ts**: AI-powered commit message generation
- **generate-code-summary.ts**: Codebase summary generation
- **test-llm-providers.ts**: LLM provider testing
- **test-provider.ts**: Individual provider testing

### **Documentation Integration**

The workflow references these documents:

- **GENERATE-GIT-COMMIT-DOCS.md**: Commit message generation guide
- **GENERATE-CODE-SUMMARY-DOCS.md**: Code summary generation guide
- **DEFAULT-MODEL-CONFIGURATION-DOCS.md**: LLM configuration guide
- **COMMAND-LINE-SETUP-DOCS.md**: CLI setup instructions

---

## Success Metrics

### **Technical Metrics**

- âœ… **Build Success Rate**: >95% successful builds
- âœ… **Test Pass Rate**: >90% test pass rate
- âœ… **Lint Pass Rate**: >95% lint pass rate
- âœ… **LLM Provider Success**: >80% provider test success
- âœ… **Error Recovery Rate**: >80% automatic error recovery

### **User Experience Metrics**

- âœ… **Zero Manual Commands**: No need to run build/test commands
- âœ… **Instant Feedback**: Immediate validation of changes
- âœ… **Clear Status**: Always know what's happening
- âœ… **Error Clarity**: Clear error messages and solutions
- âœ… **Development Speed**: 50% faster development cycle

### **Integration Metrics**

- âœ… **Cursor Integration**: Seamless integration with Cursor
- âœ… **Node.js Integration**: Full Node.js and npm integration
- âœ… **TypeScript Integration**: Complete TypeScript support
- âœ… **Git Integration**: Automatic git status and commit suggestions

---

## Future Enhancements

### **Planned Features**

1. **AI-Powered Error Fixing**: Automatic code fixes for common TypeScript errors
2. **Performance Profiling**: Built-in performance analysis for scripts
3. **Multi-Provider Testing**: Test on multiple LLM providers simultaneously
4. **Cloud Integration**: Sync with cloud development environments
5. **Advanced Monitoring**: Real-time performance and resource monitoring

### **Advanced Automation**

1. **Predictive Building**: Build before code changes based on context
2. **Smart Testing**: Run only relevant tests based on changes
3. **Intelligent LLM Testing**: Auto-switch between providers
4. **Advanced Log Analysis**: AI-powered log analysis and suggestions

---

## Conclusion

The **agent-driven development workflow** transforms Cursor into a truly autonomous development assistant for TypeScript-based AI scripts and tools. By automatically handling build, test, and validation tasks, it allows you to focus entirely on writing code while maintaining confidence that your changes are working correctly.

**Key Benefits:**
- ğŸš€ **50% faster development cycle**
- ğŸ¯ **Zero manual build/test commands**
- ğŸ”§ **Automatic error detection and recovery**
- ğŸ“Š **Comprehensive monitoring and logging**
- ğŸ¤– **Seamless LLM provider integration**

**Next Steps:**
1. **Enable the workflow** by ensuring Cursor settings are applied
2. **Test the automation** by making a small TypeScript code change
3. **Monitor the results** and adjust configuration as needed
4. **Trust the agent** to handle routine development tasks

---

*Last updated: 2025-06-27* 